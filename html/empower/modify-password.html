<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"
  />
  <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
  <script type="text/javascript" charset="utf-8" src="../../script/flexible.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/api.js"></script>
  <title>修改密码</title>

</head>  <link rel="stylesheet" type="text/css" href="../../css/empower/modify-password.css">

<body class="empower background-write">
  <header class="header">
    <img src="../../image/common/back.png" class="back">
    <p class="header-title">修改密码</p>
  </header>
  <div class="changepass">
    <ul class="updatepass">
      <li>
        <p class="pass-text">原密码</p>
        <input id="old-password" type="password" placeholder="6-12位数字和字母组合">
        <div class="icon">
          <img src="../../image/common/switch.png" class="switch">
          <img src="../../image/common/clear.png" class="clear">
        </div>
      </li>
      <li>
        <p class="pass-text">新密码</p>
        <input id="new-password" type="password" placeholder="6-12位数字和字母组合" />
        <div class="icon">
          <img src="../../image/common/switch.png" class="switch">
          <img src="../../image/common/clear.png" class="clear">
        </div>
      </li>
      <li>
        <p class="pass-text">确认密码</p>
        <input id="repeat-password" type="password" placeholder="6-12位数字和字母组合" class="conform" />
        <div class="icon">
          <img src="../../image/common/switch.png" class="switch">
          <img src="../../image/common/clear.png" class="clear">
        </div>
      </li>
    </ul>
  </div>
  <button class="btn" onclick="javascript: submit();">确定</button>
  <script type="text/javascript" charset="utf-8" src="../../script/global/api.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/base.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/check/checkPassword.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/other/toggleBtnDisabled.js"></script>
  <script type="text/javascript" charset="utf-8">
    function submit() {
      var oldPassword = $api.val('old-password');
      var newPassword = $api.val('new-password');
      var repeatPassword = $api.val('repeat-password');

      if (checkPassword(oldPassword, '请输入旧密码')) return;
      if (checkPassword(newPassword, '请输入新密码')) return;
      if (checkPassword(repeatPassword, '请再次输入新密码')) return;
      if (newPassword !== repeatPassword) {
        toast('新密码输入不正确');
      }
      request({
        url: 'xxxxx',
        values: {
          oldPassword: oldPassword,
          newPassword: newPassword,
          repeatPassword: repeatPassword
        },
        showMessage: '正在发送...',
        init: function () {
          closeBtnClick('submit-btn');
        },
        success: function () {
          kill();
        },
        default: function () {
          openBtnClick('submit-btn');
        }
      });
    }
  </script>
</body>

</html>
