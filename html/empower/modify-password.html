<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
  <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
  <script type="text/javascript" charset="utf-8" src="../../script/flexible.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/api.js"></script>
  <title>修改密码</title>
  <link rel="stylesheet" type="text/css" href="../../css/aui.css">
  <link rel="stylesheet" type="text/css" href="../../iconfont/iconfont.css">
</head>

<body class="empower background-write">

  <script type="text/javascript" charset="utf-8" src="../../script/global/api.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/base.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/check/checkPassword.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/other/toggleBtnDisabled.js"></script>
  <script type="text/javascript" charset="utf-8">

    function submit () {
      var oldPassword = $api.val('old-password');
      var newPassword = $api.val('new-password');
      var repeatPassword = $api.val('repeat-password');
      
      if (checkPassword(oldPassword, '请输入旧密码')) return;
      if (checkPassword(newPassword, '请输入新密码')) return;
      if (checkPassword(repeatPassword, '请再次输入新密码')) return;
      if (newPassword !== repeatPassword) {
        toast('新密码输入不正确');
      }
      request({
        url: 'xxxxx',
        values: {
          oldPassword: oldPassword,
          newPassword: newPassword,
          repeatPassword: repeatPassword
        },
        showMessage: '正在发送...',
        init: function () {
          closeBtnClick('submit-btn');
        },
        success: function () {
          kill();
        },
        default: function () {
          openBtnClick('submit-btn');
        }
      });
    }

  </script>
</body>

</html>