<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"
  />
  <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
  <script type="text/javascript" charset="utf-8" src="../../script/flexible.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/api.js"></script>
  <title>忘记密码</title>
  <link rel="stylesheet" type="text/css" href="../../css/aui.css">
  <link rel="stylesheet" type="text/css" href="../../iconfont/iconfont.css">
</head>

<body class="empower background-write">

  <script type="text/javascript" charset="utf-8" src="../../script/global/api.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/base.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/check/checkImageVerificationCode.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/check/checkPassword.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/check/checkPhoneVerificationCode.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../script/component/other/toggleBtnDisabled.js"></script>
  <script type="text/javascript" charset="utf-8">

    function sendSMS() {
      var imageCode = $api.val('image-code');
      if (checkImageVerificationCode(imageCode)) return;

      request({
        url: 'xxxxx',
        values: {
          imageCode: imageCode
        },
        showMessage: '正在发送...',
        init: function () {
          closeBtnClick('send-image-btn');
        },
        success: function () {
        },
        default: function () {
          openBtnClick('submit-btn');
        }
      });
    }

    function submit () {
      var phoneCode = $api.val('phone-code');
      var password = $api.val('password');
      var repeatPassword = $api.val('repeat-password');

      if (checkPhoneVerificationCode(phoneCode)) return;
      if (checkPassword(password)) return;
      if (checkPassword(repeatPassword)) return;
      if (repeatPassword !== password) {
        toast('请确认新密码');
        return;
      }

      request({
        url: 'xxxxx',
        values: {
          phoneCode: phoneCode,
          password: password,
          repeatPassword: repeatPassword
        },
        showMessage: '正在发送...',
        init: function () {
          closeBtnClick('submit-btn');
        },
        success: function () {
          kill();
        },
        default: function () {
          openBtnClick('submit-btn');
        }
      });
    }

  </script>
</body>

</html>